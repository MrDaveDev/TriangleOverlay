<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Redirecting...</title>
</head>
<body>
<script>
    // Function to extract parameters from the URL
    function getURLParams() {
        const hash = window.location.hash.substring(1); // Remove the "#" from the hash part
        const params = new URLSearchParams(hash);        // Parse the hash part into key-value pairs
        return params;
    }

    // Function to handle the token and redirect
    function handleRedirect() {
        const params = getURLParams();
        const accessToken = params.get('access_token');  // Extract access_token

        if (accessToken) {
            // Save the access token to localStorage or pass it back to editor.html
            localStorage.setItem('access_token', accessToken);
            window.location.href = 'index.html';  // Redirect back to the main app (editor.html)
        } else {
            // If no token, redirect with error message or retry
            console.error("Access token is missing");
            alert("Failed to authenticate with Twitch");
        }
    }

    // Execute the redirect handling function
    handleRedirect();
</script>
</body>
</html>
